# Urban Issue Forecasting System Configuration

project:
  name: "urban-issue-forecasting"
  version: "1.0.0"
  environment: "development"

data:
  raw_data_path: "data/raw/"
  processed_data_path: "data/processed/"
  delta_lake_path: "data/delta_lake/"
  external_data_path: "data/external/"

  # Data sources
  traffy_fondue:
    url: "https://github.com/ParinthornThammarux/2110403-DSDE-M150-Lover/releases/tag/v1.0"
    file: "bangkok_traffy.csv"
    min_records: 100000

  external_sources:
    min_records: 1000
    sources:
      - name: "bma_flood"
        url: "https://www.bangkok.go.th/flood"
        type: "web_scraping"
      - name: "traffic_data"
        url: "https://www.traffic.go.th"
        type: "api"
      - name: "construction_permits"
        url: "https://www.bangkok.go.th/permits"
        type: "web_scraping"

spark:
  app_name: "TraffyFondueProcessing"
  master: "local[*]"
  executor_memory: "4g"
  driver_memory: "2g"
  sql:
    adaptive:
      enabled: true
    shuffle:
      partitions: 200
  delta:
    logRetentionDuration: "interval 30 days"
    deletedFileRetentionDuration: "interval 7 days"

database:
  postgres:
    host: "localhost"
    port: 5432
    database: "traffy_db"
    user: "postgres"
    password: "${POSTGRES_PASSWORD}"

  mongodb:
    host: "localhost"
    port: 27017
    database: "traffy_external"

airflow:
  dags_folder: "airflow/dags"
  schedule_interval: "@daily"
  catchup: false
  max_active_runs: 1

ml_models:
  forecasting:
    lstm:
      units: [128, 64, 32]
      dropout: 0.2
      epochs: 100
      batch_size: 32
      lookback_days: 30
      forecast_horizon: 7

    prophet:
      seasonality_mode: "multiplicative"
      changepoint_prior_scale: 0.05
      yearly_seasonality: true
      weekly_seasonality: true
      daily_seasonality: false

  anomaly_detection:
    isolation_forest:
      n_estimators: 100
      contamination: 0.05
      max_samples: "auto"

    statistical:
      method: "z-score"
      threshold: 3.0
      window_size: 7

visualization:
  dashboard:
    port: 8501
    host: "0.0.0.0"
    theme: "dark"

  map:
    center_lat: 13.7563
    center_lon: 100.5018
    default_zoom: 11
    tile_layer: "OpenStreetMap"

  colors:
    palette: "viridis"
    categories:
      flooding: "#3498db"
      traffic: "#e74c3c"
      waste: "#2ecc71"
      road: "#f39c12"
      other: "#95a5a6"

web_scraping:
  user_agent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
  timeout: 30
  retry_attempts: 3
  delay_between_requests: 2

  selenium:
    headless: true
    driver_path: "/usr/local/bin/chromedriver"

logging:
  level: "INFO"
  format: "[{time:YYYY-MM-DD HH:mm:ss}] {level} | {message}"
  file: "logs/app.log"
  rotation: "500 MB"
  retention: "30 days"

performance:
  cache_enabled: true
  parallel_jobs: 4
  chunk_size: 10000
